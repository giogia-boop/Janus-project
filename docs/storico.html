<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒ¿ Janus â€“ Storico Dati Meteo</title>
  <!-- Stili base -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1 { color: #2c3e50; }
    .btn { display: inline-block; margin: 10px 5px; padding: 8px 12px; background: #2c3e50; color: white; text-decoration: none; border-radius: 6px; }
    .btn:hover { background: #34495e; }
    table.dataTable thead th { background: #e0e0e0; }
  </style>
</head>
<body>
  <h1>ğŸŒ¿ Janus â€“ Storico Dati Meteo</h1>
  <p>
    <a class="btn" href="index.html">â¬…ï¸ Torna alla Dashboard</a>
    <a class="btn" href="data/storico.csv">ğŸ“œ Scarica CSV</a>
  </p>

  <table id="storicoTable" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Data/Ora</th>
        <th>Stazione</th>
        <th>Temperatura (Â°C)</th>
        <th>UmiditÃ  (%)</th>
        <th>Dew Point (Â°C)</th>
        <th>Pressione (hPa)</th>
        <th>Vento (km/h)</th>
        <th>Direzione</th>
        <th>Pioggia (mm/h)</th>
        <th>Totale Giorno (mm)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Dipendenze DataTables -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

  <script>
    async function loadCSV() {
      const resp = await fetch("data/storico.csv");
      const text = await resp.text();
      const rows = text.trim().split("\n").map(r => r.split(","));

      const data = [];
      for (let i = 1; i < rows.length; i++) {
        data.push(rows[i]);
      }

      $("#storicoTable").DataTable({
        data: data,
        columns: [
          { title: "Data/Ora" },
          { title: "Stazione" },
          { title: "Temperatura (Â°C)" },
          { title: "UmiditÃ  (%)" },
          { title: "Dew Point (Â°C)" },
          { title: "Pressione (hPa)" },
          { title: "Vento (km/h)" },
          { title: "Direzione" },
          { title: "Pioggia (mm/h)" },
          { title: "Totale Giorno (mm)" }
        ],
        order: [[0, "desc"]],
        pageLength: 25
      });
    }

    loadCSV();
  </script>
</body>
</html>
